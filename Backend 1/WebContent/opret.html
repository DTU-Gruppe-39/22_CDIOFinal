<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<link rel="stylesheet" type="text/css" href="Stylish.css">
<script type="text/javascript" src="jquery-3.3.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<script type="text/javascript" src="jquery.serialize-object.js">

</script>

<script>
function myFunction() {
	var id = document.getElementById("ID").value;
	var navn = document.getElementById("Brugernavn").value
	var ini = document.getElementById("ini").value
	var cpr = document.getElementById("CPR").value
	var passwd = document.getElementById("password").value
	var rolle = document.getElementById("rolle").value
	
	var bruger = {
		"userId" : id,
		"userName" : navn,
		"ini" : ini,
		"cpr" : cpr,
		"password" : passwd,
		"roles" : rolle
	}
	return bruger;

}
	//$(function() { // Sikrer sig at dokumentet er indlæst, 
		// før click handlers håndteres
		//$('#submit').click(function() { //Sætter en click handler på knappen

		function submit() { //Formen kalder denne function, sikre at alle felter er udfyldt
					alert("Function kaldt");
		//debugger;
		myJSON = myFunction();
			$.ajax({ //Indleder et asynkront ajax kald
				url : 'rest/backend/create', //specificerer endpointet
				type : 'POST', //Typen af HTTP requestet (GET er default)
				data : 	JSON.stringify(myJSON),
				contentType : 'application/json',
				//Nedenstående bliver ikke kørt
				success : function(data) {//Funktion der skal udføres når data er hentet
					alert("data"); //Manipulerer #mydiv.
				}, failure: function(){
					alert("fail");
				}
			});
			return false; //For at undgå at knappen poster data (default behavior).

		}

	//});
</script>

</head>

<body>


	<p id="demo"></p>
	<br>
	<input type="text" id="myText" value="">
	<button onclick="myFunction()">Test</button>

	<div class="divOpret">
		<!--   <img>
<img src="http://www.dtu.dk/english/-/media/DTU-endk/About%20DTU/PRESS_ROOM/DTU-3.ashx?h=237&la=da&mw=460&w=162"
    alt="http://www.dtu.dk/english/About/PRESS-ROOM/Photos-and-Multimedia/DTU-logo" width="90" height="125">
  </img> -->
		<form action="javascript:submit()" method="post">
			<h1>
				<b>
					<center>Opret bruger</center>
				</b>
			</h1>

			<center>BrugerID:</center>
			<center>
				<input type="number" id="ID" required pattern="[0-9.]+">
			</center>
			<br>
			<center>Brugernavn</center>
			<center>
				<input type="text" id="Brugernavn" required
					pattern="[a-åA-Å]*">
			</center>
			<br>
			<center>Initial</center>
			<center>
				<input type="text" id="ini" required>
			</center>
			<br>
			<center>CPR-nr</center>
			<center>
				<input type="text" id="CPR" required>
			</center>
			<br>
			<center>Password</center>
			<center>
				<input type="text" id="password" required>
			</center>
			<center>
				<select id=rolle required="required">
					<option value=""> Vælg rolle </option>
					<option value="Admin">Admin</option>
					<option value="Pharmacist">Pharmacist</option>
					<option value="Produktionsleder">Produktionsleder</option>
					<option value="Laborant">Laborant</option>
				</select>
			</center>
			<br>

			<center>
				<input type="submit" id="submit" value="Opret">
			</center>
		</form>
	</div>

</body>
<script>
	
</script>
</html>